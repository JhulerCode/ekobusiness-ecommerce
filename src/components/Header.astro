---
import logo from '../assets/logo-sunka-black.webp';
import Menu from '../assets/icons/menu.astro';
import XmakIcon from '../assets/icons/xmark.astro';
import CartIcon from '../components/CartIcon.vue';
import AuthModal from '../components/AuthModal.vue';

const navLinks = [
    { name: 'Filtrante', href: '/linea/filtrante' },
    { name: 'Granel', href: '/linea/granel' },
    { name: 'Luxury', href: '/linea/luxury' },
];
---

<header class="w-full bg-white shadow-sm sticky top-0 z-50">
    <div
        class="relative max-w-7xl mx-auto px-6 flex items-center justify-between h-16"
    >
        <a href="/" class="flex items-center gap-2">
            <img src={logo.src} alt="logo-sunka-dark" class="h-8 w-auto" />
        </a>

        <nav
            class="hidden md:flex items-center gap-8 absolute left-1/2 -translate-x-1/2"
        >
            {
                navLinks.map((link) => (
                    <a
                        href={link.href}
                        class="relative text-black text-md after:content-[''] after:absolute after:left-0 after:-bottom-0.5 after:w-full after:h-[2px] after:bg-black after:scale-x-0 after:origin-left after:transition-transform after:duration-300 hover:after:scale-x-100"
                    >
                        {link.name}
                    </a>
                ))
            }
        </nav>

        <div class="flex items-center gap-4">
            <AuthModal client:load />

            <CartIcon client:load />

            <button
                id="menu-toggle"
                class="md:hidden text-gray-900 hover:text-black"
            >
                <div id="icon-menu">
                    <Menu />
                </div>
                <div id="icon-close" class="hidden">
                    <XmakIcon />
                </div>
            </button>
        </div>
    </div>
</header>

<!-- Menú móvil -->
<div
    id="mobile-menu"
    class="fixed top-16 left-0 w-full h-[calc(100vh-4rem)] bg-white transform -translate-x-full transition-transform duration-300 ease-in-out z-40 flex flex-col p-6 gap-6 md:hidden"
>
    {
        navLinks.map((link) => (
            <a
                href={link.href}
                class="text-lg font-medium text-gray-900 hover:underline"
            >
                {link.name}
            </a>
        ))
    }
</div>

<script>
    const toggleBtn = document.getElementById('menu-toggle');
    const mobileMenu = document.getElementById('mobile-menu');
    const iconMenu = document.getElementById('icon-menu');
    const iconClose = document.getElementById('icon-close');

    toggleBtn?.addEventListener('click', () => {
        const isOpen = mobileMenu.classList.contains('translate-x-0');
        if (isOpen) {
            mobileMenu.classList.add('-translate-x-full');
            mobileMenu.classList.remove('translate-x-0');
            iconMenu.classList.remove('hidden');
            iconClose.classList.add('hidden');
        } else {
            mobileMenu.classList.remove('-translate-x-full');
            mobileMenu.classList.add('translate-x-0');
            iconMenu.classList.add('hidden');
            iconClose.classList.remove('hidden');
        }
    });
</script>
